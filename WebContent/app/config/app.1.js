(function(b){var a={redirect:"/",rootPath:location.protocol+"//"+location.host+"/",timestamp:Date.parse(new Date())/1000,automask:false,autotips:false,app:{code:"",dir:"",dashboard:"",schoolmanager:"",styles:[],scripts:[],modules:[]},map:[{path:"",view:"",viewUrl:"",styles:null,scripts:null,modules:null}],menu:[{code:"",name:"",icon:""}],service:{},eachpath:function(e,d){angular.forEach(e,function(f){this.push(a.extpath(f,d))},e=[]);return e},extpath:function(i,g){var f=document.baseURI+"app/"+(g==="html"?"views":g)+"/"+a.app.dir,h="."+g,e=!/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(i),d=!new RegExp("\\."+g+"\\?","i").test(i),j=!new RegExp("(\\."+g+"$)|(\\."+g+"\\?)","i").test(i);if(e){i=f+i}if(j){i=i+h}if(e&&d){i=i+"?t="+a.timestamp}return i},browser:(function(f){var e={},d=f.match(/MicroMessenger\/([\d.]+)/);d&&(e.weixin=parseFloat(d[1]));return e}(navigator.userAgent)),os:(function(f){var e={},d=f.match(/(?:Android);?[\s\/]+([\d.]+)?/),g=f.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);d&&(e.android=parseFloat(d[1]));g&&(e.ios=parseFloat(g[1].replace(/_/g,".")));return e}(navigator.userAgent))},c=(function(){return{js:"application/x-javascript",css:"text/css",less:"text/css",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",bmp:"image/bmp",swf:"application/x-shockwave-flash",pdf:"application/pdf","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",zip:"application/zip,application/x-zip-compressed",doc:"application/msword",docx:"application/msword",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.ms-powerpoint",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",txt:"text/plain",mp3:"audio/mpeg",wma:"audio/x-ms-wma",rm:"application/vnd.rn-realmedia",rmvb:"application/vnd.rn-realmedia",ra:"audio/x-pn-realaudio",mid:"audio/midi",wav:"audio/x-wav",md:"text/plain",avi:"video/x-msvideo",mp4:"video/mp4",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v","3gp":"video/3gpp",ts:"text/texmacs",wmv:"video/x-ms-wmv",mkv:"video/x-matroska",mov:"video/quicktime"}}());dlb.Config&&angular.forEach(a,function(f,e,d){if((d=dlb.Config[e])&&f instanceof Array){a[e]=d}else{if(typeof f==="object"){angular.extend(f,d)}else{if(d!==undefined){a[e]=d}}}});b.config(["$animateProvider","$compileProvider","$controllerProvider","$filterProvider","$httpProvider","$locationProvider","$routeProvider","$provide",function(g,d,j,k,i,e,f,h){i.interceptors.push(["$q","tips","viewMask",function(m,l,n){return{request:function(p){if(p.url&&/\/api\/1.1b\//i.test(p.url)&&p.method){var o=function(q){angular.forEach(["automask","autotips"],function(r){p[r]=q[r]===undefined?a[r]:q[r];delete q[r]});delete q._api_action;return q};if(p.method.toUpperCase()==="GET"){p.params=o(p.params||{})}else{p.data=o(p.data||{});p.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";p.transformRequest=[function(q){return angular.isObject(q)?$.param(angular.forEach(q,function(s,r){q[r]=(angular.isArray(s)||angular.isObject(s))?JSON.stringify(s):s})):q}]}p.automask&&n.open();p.url=decodeURIComponent(p.url)}return p},requestError:function(o){return m.reject(o)},response:function(o){if(o.config){o.config.automask&&n.close();o.data.message&&(o.config.autotips===true||o.config.autotips===1)&&l.success(o.data.message)}return o},responseError:function(o){if(o.config){o.config.automask&&n.close();o.data.message&&(o.config.autotips===true||o.config.autotips===2)&&l.error(o.data.message)}if(o.data.code=="10020002"){location.href="http://auth.dlb.cn/auth/login?go="+encodeURIComponent(location.href)}return m.reject(o)}}}]);h.factory("loadScript",["$q",function(m){var l={};return function(o,s){var r=m.defer(),n=[],q=[];angular.forEach(o instanceof Array?o:[o],function(t,u){u=l[t]||m.defer();q.push(u.promise);if(!l[t]){l[t]=u;n.push(t)}});(function p(u,t,v){if(t=n[u]){v=document.createElement("script");v[document.addEventListener?"onload":"onreadystatechange"]=function(x,w){if(w||!v.readyState||/loaded|complete/.test(v.readyState)){document.body.removeChild(v);l[t].resolve();p(u+1)}};v.onerror=function(){l[t].reject();p(u+1)};v.src=t;document.body.appendChild(v)}}(0));m.all(q).then(function(){angular.isFunction(s)&&setTimeout(s);r.resolve()},r.reject);return r.promise}}]);h.factory("loadStyle",["$q",function(m){var l={};return function(p){var o=navigator.userAgent,r=angular.isFunction(arguments[1])?arguments[1]:arguments[2],n=typeof arguments[1]==="boolean"?arguments[1]:arguments[2];angular.forEach(p instanceof Array?p:[p],function(s,v,t){v=l[s]||m.defer();this.push(v.promise);if(!l[s]){t=document.createElement("link");t.rel="stylesheet";if(n){l[s]=v}else{t.className="loader-stylesheet"}if(/(?:Android);?[\s\/]+([\d.]+)?/i.test(o)||/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/i.test(o)){(function u(y,w){if(/webkit/i.test(o)){if(t.sheet){w=true}}else{if(t.sheet){try{if(t.sheet.cssRules){w=true}}catch(x){if(x.name==="SecurityError"||x.code===1000){w=true
}}}}if(w||(y>=200)){v.resolve()}else{setTimeout(function(){u(y+1)},10)}}(0))}else{t[document.addEventListener?"onload":"onreadystatechange"]=function(x,w){if(w||!t.readyState||/loaded|complete/.test(t.readyState)){v.resolve()}}}t.onerror=v.reject;t.href="app/css/"+s+".css";(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}},p=[]);var q=m.defer();m.all(p).then(function(){angular.isFunction(r)&&setTimeout(r);q.resolve()},q.reject);return q.promise}}]);h.factory("moduleInjector",["$injector","$log",function(n,o){var l={},q=[],p=[],m={$animateProvider:g,$compileProvider:d,$controllerProvider:j,$filterProvider:k,$provide:h};return function(r){r&&angular.forEach(r instanceof Array?r:[r],function(u,t){try{if(!l[u]&&(t=angular.module(u))){q=q.concat(t._invokeQueue);p=p.concat(t._runBlocks);l[u]=true}}catch(s){if(s.message){s.message+=" from "+u;o.error(s.message)}throw s}});angular.forEach(q,function(t,u){try{t.length>2&&m.hasOwnProperty(t[0])&&(u=m[t[0]])&&u[t[1]].apply(u,t[2])}catch(s){if(s.message){s.message+=" from "+JSON.stringify(t);o.error(s.message)}throw s}});angular.forEach(p,function(s){n.invoke(s)});q.length=0;p.length=0}}]);h.factory("routeApply",["$q","$location","moduleInjector","loadScript","loadStyle",function(l,q,o,n,m){var p={};return function(r){angular.forEach(r,function(s){if(s.view||s.viewUrl){angular.forEach(s.scripts?(s.scripts instanceof Array?s.scripts:[s.scripts]):[],function(t){this.push(a.extpath(t,"js"))},s.scripts=[]);angular.forEach(s.path instanceof Array?s.path:[s.path],function(t){this.when(t,{template:s.viewUrl?undefined:s.view,templateUrl:s.viewUrl?a.extpath(s.viewUrl,"html"):undefined,resolve:{promise:function(){if(!p[t]){$("body>section").css({visibility:"hidden"});m(s.styles,function(){o(s.modules);p[t].resolve()});n(s.scripts,function(){o(s.modules);p[t].resolve();setTimeout(function(){$("body>section").css({visibility:"visible"})})})}return(p[t]=p[t]||l.defer()).promise}}})},f)}});f.otherwise({redirectTo:a.redirect})}}]);h.service("$api",["$resource",function(m){var l=function(o,n){return(/(^http:\/\/)|(^https:\/\/)|(^\/)/.test(o)?o:(location.protocol+"//"+location.host+"/api/1.1b/"+o))+(n?"/:_api_action":"")};this.$apply=function(o,n){n&&angular.forEach(this,function(q,p){if(p!=="$apply"){delete this[p]}},this);angular.forEach(o,function(t,r){if(t instanceof Array){var q=t[0],s=t[1],u=t[2],p=t[3];if(q){u=angular.forEach(angular.extend({get:{method:"GET"},list:{method:"GET"},search:{method:"GET"},set:{method:"POST"},create:{method:"POST"},update:{method:"POST"},remove:{method:"POST"},"delete":{method:"POST"}},u),function(w,v){w=w||{};if(w.url){w.url=l(w.url)}w.method=w.method||"GET";w.params=angular.extend(w.url?{}:{_api_action:v==="remove"?"delete":v},w.params)});this[r]=m(l(q,true),s,u,p)}}},this);return this}}]);h.factory("tips",function(){function A(B,p){B=B.toString().split(".");p=p.toString().split(".");for(var n=0;n<B.length||n<p.length;n++){var o=parseInt(B[n],10),m=parseInt(p[n],10);if(window.isNaN(o)){o=0}if(window.isNaN(m)){m=0}if(o<m){return -1}else{if(o>m){return 1}}}return 0}function z(p,m){var n=navigator.userAgent,o=(/Android/i).test(n),B=n.match(/(?:OS|Android)[/s](d+[._]d+(?:[._]d+)?)/i);if(o&&A(B,"2.4.0")<0){setTimeout(function(){p&&p(m)},1)}else{p&&p(m)}}function w(m){this._options=x.extend({mode:"msg",text:"u7f51u9875u63d0u793a",useTap:!1},m||{});this._init()}var x=$,u=x(window),y=x('<div class="c-float-popWrap msgMode hide"><div class="c-float-modePop"><div class="warnMsg"></div><div class="content"></div><div class="doBtn"><button class="ok">u786eu5b9a</button><button class="cancel">u53d6u6d88</button></div></div></div>'),s=y.find(".warnMsg"),r=y.find(".content"),q=y.find(".doBtn .ok"),l=y.find(".doBtn .cancel"),t=!1,v;x.extend(w.prototype,{_init:function(){var E=this,D=E._options,p=D.mode,n=D.text,C=D.content,B=D.callback,m=D.background,F=D.btns,D=D.useTap?"tap":"click",o=y.attr("class"),o=o.replace(/(msg|alert|confirm)Mode/i,p+"Mode");y.attr("class",o);m&&y.css("background",m);n&&s.html(n);C&&r.html(C);F&&q.html(F[0]);F&&l.html(F[1]);q.off(D).on(D,function(G){B.call(E,G,!0)});l.off(D).on(D,function(G){B.call(E,G,!1)});t||(t=!0,x("body").append(y),u.on("resize",function(){setTimeout(function(){E._pos()},500)}))},_pos:function(){var n=document,m=n.documentElement,o=n.body,B,C,p;this.isHide()||(n=o.scrollTop,o=o.scrollLeft,B=m.clientWidth,m=m.clientHeight,C=y.width(),p=y.height(),y.css({top:n+(m-p)/2,left:o+(B-C)/2}))},isShow:function(){return y.hasClass("show")},isHide:function(){return y.hasClass("hide")},_cbShow:function(){var m=this._options.onShow;y.css("opacity","1").addClass("show");m&&m.call(this)},show:function(){var m=this;v&&(clearTimeout(v),v=void 0);m.isShow()?m._cbShow():(y.css("opacity","0").removeClass("hide"),m._pos(),setTimeout(function(){m._cbShow()},300),setTimeout(function(){y.animate({opacity:"1"},300,"linear")},1))},_cbHide:function(){var m=this._options.onHide;y.css("opacity","0").addClass("hide");m&&m.call(this)
},hide:function(){var m=this;m.isHide()?m._cbHide():(y.css("opacity","1").removeClass("show"),setTimeout(function(){m._cbHide()},300),setTimeout(function(){y.animate({opacity:"0"},300,"linear")},1))},flash:function(n){var m=this;opt=m._options;opt.onShow=function(){v=setTimeout(function(){v&&m.hide()},n)};m.show()}});return{simple:function(n,m,p){2==arguments.length&&"number"==typeof arguments[1]&&(p=arguments[1],m=void 0);var o=new w({mode:"msg",text:n,background:m});o.flash(p||2000);return o},msg:function(n,m){return new w(x.extend({mode:"msg",text:n},m||{}))},alert:function(n,m,o){return new w(x.extend({mode:"alert",text:n,callback:m},o||{}))},confirm:function(n,m,B,o){var p=new w({mode:"confirm",text:n,content:m,btns:B,callback:o});p.show();return p},pop:function(m){return new w(m)}}});h.service("viewMask",function(){var m=0,n=$("body>div.view-mask").hide(),l=function(q,o,p){if(o){m++;!$(".modal-backdrop").length&&n.show()}else{if(p){m=0}else{m--}!m&&n.hide()}q instanceof Function&&setTimeout(q)};this.open=function(){l(arguments[0],true)};this.close=function(){var p=arguments[0],o=arguments[1];if(!(p instanceof Function)){p=null;o=arguments[0]}l(p,false,o)}})}]);b.controller(b.name+".controller",["$rootScope","$location","$route","$q","routeApply",function(d,h,g,f,e){e(a.map)}]);angular.element(document).ready(function(){var d=$(document.body).attr("ng-controller",b.name+".controller");angular.bootstrap(document,[b.name])})}(angular.module("app",["ngResource","ngRoute","ngSanitize"])));